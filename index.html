<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DealShield — AI Deal Risk & Verification Copilot</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div class="brand">
        <h1>DealShield</h1>
        <p>Paste a chat/email/invoice → get a Deal Snapshot, explainable risk score, verification plan, and a safe reply.</p>
      </div>
      <div class="badge">
        <span>DealShield MVP</span>
        <span style="color:#f0c36b;">•</span>
        <span id="aiStatus" title="On-device AI is optional. If it cannot load, DealShield stays fully functional using deterministic checks.">AI: optional</span>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h2>Input</h2>
        <textarea id="input" placeholder="Paste a chat, email, or invoice text here..."></textarea>
        <div class="row">
          <button class="primary" id="analyzeBtn">Analyze</button>
          <button id="demo1">Load demo (clean)</button>
          <button id="demo2">Load demo (bank change)</button>
          <button id="demo3">Load demo (advance-fee)</button>
        </div>
        <div class="footer">
          Tip: first AI run may take longer while the model downloads (runs fully in your browser).
        </div>
      </div>

      <div class="card">
        <h2>Risk</h2>
        <div class="risk">
          <div>
            <div class="score"><span id="score">—</span><span style="color:var(--muted); font-size:14px;">/100</span></div>
            <div id="riskPill" class="pill">—</div>
          </div>
          <div style="text-align:right;">
            <small>Explainable reasons</small>
          </div>
        </div>
        <hr />
        <div class="output">
          <ul id="reasons"></ul>
        </div>
      </div>

      <div class="card">
        <h2>Deal Snapshot</h2>
        <div class="kv" id="snapshot">
          <div class="k">Parties</div><div id="parties">—</div>
          <div class="k">Amount</div><div id="amount">—</div>
          <div class="k">Deadline</div><div id="deadline">—</div>
          <div class="k">Payment</div><div id="payment">—</div>
          <div class="k">Links</div><div id="links">—</div>
        </div>
      </div>

      <div class="card">
        <h2>Verification Plan</h2>
        <div class="output">
          <ul id="plan"></ul>
        </div>
        <hr />
        <h2>Safe Reply</h2>
        <div class="output" id="replyBox" style="white-space:pre-wrap;">—</div>
        <div class="row">
          <button id="copyReply">Copy safe reply</button>

          <span id="exportWrap" style="position:relative; display:inline-block;">
            <button id="exportBtn" aria-haspopup="menu" aria-expanded="false">Export report</button>
            <div id="exportMenu" role="menu" hidden
                 style="position:absolute; right:0; top:calc(100% + 6px); min-width:180px; background:#12151a; border:1px solid rgba(255,255,255,.14); border-radius:12px; padding:10px; box-shadow:0 12px 30px rgba(0,0,0,.45); z-index:50;">
              <div style="font-size:12px; opacity:.85; margin-bottom:8px;">Choose format</div>
              <button id="exportTxt" role="menuitem" style="width:100%; margin-bottom:8px;">TXT</button>
              <button id="exportPdf" role="menuitem" style="width:100%;">PDF</button>
            </div>
          </span>
        </div>
      </div>

      <div class="card" style="grid-column:1/-1;">
        <h2>Highlighted input</h2>
        <div class="output" id="highlighted" style="white-space:pre-wrap;">—</div>
      </div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
